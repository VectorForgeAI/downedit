<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="down.edit">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0066cc" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#1e1e1e" media="(prefers-color-scheme: dark)">
  <meta name="description" content="A privacy-first Markdown editor. Works offline on any device.">

  <title>down.edit</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-120.png">

  <!-- Splash screens for iOS -->
  <link rel="apple-touch-startup-image" href="/splash/splash-1170x2532.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)">
  <link rel="apple-touch-startup-image" href="/splash/splash-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)">

  <link rel="stylesheet" href="/src/styles.css">
</head>
<body>
  <div id="app">
    <!-- Toolbar -->
    <header class="toolbar">
      <div class="toolbar-left">
        <button id="btn-docs" class="toolbar-btn" title="Documents">
          <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
            <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
          </svg>
        </button>
        <button id="btn-new" class="toolbar-btn" title="New File">
          <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"/>
          </svg>
          <span>New</span>
        </button>
        <button id="btn-open" class="toolbar-btn" title="Open File">
          <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
            <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5z"/>
          </svg>
          <span>Open</span>
        </button>
        <button id="btn-save" class="toolbar-btn" title="Save File">
          <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
          </svg>
          <span>Save</span>
        </button>
      </div>

      <div class="view-mode-toggle">
        <button id="btn-mode-edit" class="mode-btn" title="Edit Mode">Edit</button>
        <button id="btn-mode-split" class="mode-btn active" title="Split Mode">Split</button>
        <button id="btn-mode-preview" class="mode-btn" title="Preview Mode">View</button>
      </div>

      <div class="toolbar-right">
        <div class="export-dropdown">
          <button id="btn-export" class="toolbar-btn" title="Export">
            <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
              <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
              <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
            </svg>
          </button>
          <div id="export-menu" class="export-dropdown-menu hidden">
            <button id="export-pdf" class="dropdown-item">Export to PDF</button>
            <button id="export-docx" class="dropdown-item">Export to Word</button>
            <button id="export-html" class="dropdown-item">Export to HTML</button>
          </div>
        </div>
        <button id="btn-theme" class="toolbar-btn" title="Toggle Theme">
          <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8m.5-9.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m0 11a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m5-5a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1m-11 0a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1m9.743-4.036a.5.5 0 1 1-.707-.707.5.5 0 0 1 .707.707m-7.779 7.779a.5.5 0 1 1-.707-.707.5.5 0 0 1 .707.707m7.072 0a.5.5 0 1 1 .707-.707.5.5 0 0 1-.707.707m-7.779-7.779a.5.5 0 1 1 .707-.707.5.5 0 0 1-.707.707"/>
          </svg>
          <span id="theme-label">System</span>
        </button>
        <button id="btn-install" class="toolbar-btn btn-install hidden" title="Install App">
          <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Tabs -->
    <div class="tabs-container">
      <div id="tabs" class="tabs"></div>
    </div>

    <!-- Formatting Toolbar -->
    <div id="formatting-toolbar" class="formatting-toolbar hidden">
      <!-- Text formatting -->
      <div class="format-group">
        <button id="fmt-bold" class="format-btn" title="Bold">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"/>
          </svg>
        </button>
        <button id="fmt-italic" class="format-btn" title="Italic">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"/>
          </svg>
        </button>
        <button id="fmt-strikethrough" class="format-btn" title="Strikethrough">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M6.333 5.686c0 .31.083.581.27.814H5.166a2.776 2.776 0 0 1-.099-.76c0-1.627 1.436-2.768 3.48-2.768 1.969 0 3.39 1.175 3.445 2.85h-1.23c-.11-1.08-.964-1.743-2.25-1.743-1.23 0-2.18.602-2.18 1.607zm2.194 7.478c-2.153 0-3.589-1.107-3.705-2.81h1.23c.144 1.06 1.129 1.703 2.544 1.703 1.34 0 2.31-.705 2.31-1.675 0-.827-.547-1.374-1.914-1.675L8.046 8.5H1v-1h14v1h-3.504c.468.437.675.994.675 1.697 0 1.826-1.436 2.967-3.644 2.967z"/>
          </svg>
        </button>
        <button id="fmt-code-inline" class="format-btn" title="Inline Code">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M5.854 4.854a.5.5 0 1 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L2.707 8l3.147-3.146zm4.292 0a.5.5 0 0 1 .708-.708l3.5 3.5a.5.5 0 0 1 0 .708l-3.5 3.5a.5.5 0 0 1-.708-.708L13.293 8l-3.147-3.146z"/>
          </svg>
        </button>
      </div>

      <div class="format-divider"></div>

      <!-- Headings -->
      <div class="format-group">
        <div class="format-dropdown">
          <button id="fmt-heading" class="format-btn format-dropdown-btn" title="Heading">
            <span style="font-weight:600">H</span>
            <svg width="10" height="10" viewBox="0 0 16 16" fill="currentColor">
              <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
            </svg>
          </button>
          <div id="heading-menu" class="format-dropdown-menu hidden">
            <button data-level="1" class="dropdown-item">Heading 1</button>
            <button data-level="2" class="dropdown-item">Heading 2</button>
            <button data-level="3" class="dropdown-item">Heading 3</button>
            <button data-level="4" class="dropdown-item">Heading 4</button>
          </div>
        </div>
      </div>

      <div class="format-divider"></div>

      <!-- Lists -->
      <div class="format-group">
        <button id="fmt-ul" class="format-btn" title="Bullet List">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
          </svg>
        </button>
        <button id="fmt-ol" class="format-btn" title="Numbered List">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/>
            <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"/>
          </svg>
        </button>
        <button id="fmt-task" class="format-btn" title="Task List">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
            <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>
          </svg>
        </button>
      </div>

      <div class="format-divider"></div>

      <!-- Block elements -->
      <div class="format-group">
        <button id="fmt-quote" class="format-btn" title="Blockquote">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M12 12a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1h-1.388c0-.351.021-.703.062-1.054.062-.372.166-.703.31-.992.145-.29.331-.517.559-.683.227-.186.516-.279.868-.279V3c-.579 0-1.085.124-1.52.372a3.322 3.322 0 0 0-1.085.992 4.92 4.92 0 0 0-.62 1.458A7.712 7.712 0 0 0 9 7.558V11a1 1 0 0 0 1 1h2Zm-6 0a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1H4.612c0-.351.021-.703.062-1.054.062-.372.166-.703.31-.992.145-.29.331-.517.559-.683.227-.186.516-.279.868-.279V3c-.579 0-1.085.124-1.52.372a3.322 3.322 0 0 0-1.085.992 4.92 4.92 0 0 0-.62 1.458A7.712 7.712 0 0 0 3 7.558V11a1 1 0 0 0 1 1h2Z"/>
          </svg>
        </button>
        <button id="fmt-hr" class="format-btn" title="Horizontal Rule">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M0 8a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 0 1H.5A.5.5 0 0 1 0 8z"/>
          </svg>
        </button>
      </div>

      <div class="format-divider"></div>

      <!-- Insert elements -->
      <div class="format-group">
        <button id="fmt-link" class="format-btn" title="Insert Link">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>
            <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/>
          </svg>
        </button>
        <button id="fmt-image" class="format-btn" title="Insert Image">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
            <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
          </svg>
        </button>
        <button id="fmt-code-block" class="format-btn" title="Insert Code Block">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
            <path d="M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0zm2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Link Dialog -->
    <div id="link-dialog" class="modal-overlay hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>Insert Link</h3>
          <button class="modal-close" data-close>&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="link-text">Link Text</label>
            <input type="text" id="link-text" placeholder="Display text">
          </div>
          <div class="form-group">
            <label for="link-url">URL</label>
            <input type="url" id="link-url" placeholder="https://example.com">
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close>Cancel</button>
          <button id="link-insert" class="btn-primary">Insert</button>
        </div>
      </div>
    </div>

    <!-- Image Dialog -->
    <div id="image-dialog" class="modal-overlay hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>Insert Image</h3>
          <button class="modal-close" data-close>&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="image-url">Image URL</label>
            <input type="url" id="image-url" placeholder="https://example.com/image.png">
          </div>
          <div class="form-group">
            <label for="image-alt">Alt Text</label>
            <input type="text" id="image-alt" placeholder="Image description">
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close>Cancel</button>
          <button id="image-insert" class="btn-primary">Insert</button>
        </div>
      </div>
    </div>

    <!-- Code Block Dialog -->
    <div id="code-dialog" class="modal-overlay hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>Insert Code Block</h3>
          <button class="modal-close" data-close>&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="code-language">Language</label>
            <select id="code-language">
              <option value="">Plain text</option>
              <option value="javascript">JavaScript</option>
              <option value="typescript">TypeScript</option>
              <option value="python">Python</option>
              <option value="swift">Swift</option>
              <option value="rust">Rust</option>
              <option value="go">Go</option>
              <option value="java">Java</option>
              <option value="html">HTML</option>
              <option value="css">CSS</option>
              <option value="json">JSON</option>
              <option value="bash">Bash</option>
              <option value="sql">SQL</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close>Cancel</button>
          <button id="code-insert" class="btn-primary">Insert</button>
        </div>
      </div>
    </div>

    <!-- PDF Export Dialog -->
    <div id="pdf-dialog" class="modal-overlay hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>Export to PDF</h3>
          <button class="modal-close" data-close>&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-row">
            <div class="form-group">
              <label for="pdf-pagesize">Page Size</label>
              <select id="pdf-pagesize">
                <option value="letter">Letter</option>
                <option value="a4">A4</option>
              </select>
            </div>
            <div class="form-group">
              <label for="pdf-fontsize">Font Size</label>
              <input type="number" id="pdf-fontsize" value="11" min="8" max="16">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close>Cancel</button>
          <button id="pdf-export-btn" class="btn-primary">Export</button>
        </div>
      </div>
    </div>

    <!-- Word Export Dialog -->
    <div id="docx-dialog" class="modal-overlay hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>Export to Word</h3>
          <button class="modal-close" data-close>&times;</button>
        </div>
        <div class="modal-body">
          <p style="color: var(--text-secondary); font-size: 14px;">Your document will be exported as a .docx file that can be opened in Microsoft Word, Google Docs, or other word processors.</p>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close>Cancel</button>
          <button id="docx-export-btn" class="btn-primary">Export</button>
        </div>
      </div>
    </div>

    <!-- HTML Export Dialog -->
    <div id="html-dialog" class="modal-overlay hidden">
      <div class="modal">
        <div class="modal-header">
          <h3>Export to HTML</h3>
          <button class="modal-close" data-close>&times;</button>
        </div>
        <div class="modal-body">
          <p style="color: var(--text-secondary); font-size: 14px;">Your document will be exported as a standalone HTML file with embedded styling.</p>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" data-close>Cancel</button>
          <button id="html-export-btn" class="btn-primary">Export</button>
        </div>
      </div>
    </div>

    <!-- Documents Panel -->
    <aside id="documents-panel" class="documents-panel">
      <div class="documents-header">
        <h3>Documents</h3>
      </div>
      <div id="documents-content" class="documents-content"></div>
    </aside>

    <!-- Main content area -->
    <main class="main-container">
      <!-- Welcome Screen -->
      <div id="welcome" class="welcome-screen">
        <div class="welcome-icon">
          <svg width="64" height="64" viewBox="0 0 16 16" fill="currentColor">
            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
            <path d="M4.5 6.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5m0 2A.5.5 0 0 1 5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5"/>
          </svg>
        </div>
        <h2>down.edit</h2>
        <p>A privacy-first Markdown editor.<br>Works offline on any device.</p>
        <div class="welcome-actions">
          <button id="btn-new-welcome" class="btn-primary">New File</button>
          <button id="btn-open-welcome" class="btn-secondary">Open File</button>
        </div>
        <div class="welcome-hint">
          <p>Your documents are stored locally on this device.</p>
        </div>
      </div>

      <!-- Editor Container - VERTICAL SPLIT: Preview TOP, Editor BOTTOM -->
      <div id="editor-container" class="editor-container hidden" data-mode="split">
        <!-- Preview Pane (TOP) -->
        <div id="preview-pane" class="preview-pane">
          <div id="viewer" class="markdown-viewer"></div>
        </div>

        <!-- Resize Handle -->
        <div id="resize-handle" class="resize-handle"></div>

        <!-- Editor Pane (BOTTOM) -->
        <div id="editor-pane" class="editor-pane">
          <div class="editor-wrapper">
            <textarea id="editor" class="editor" placeholder="Start typing your markdown here..." spellcheck="true" autocapitalize="sentences" autocomplete="off"></textarea>
          </div>
        </div>
      </div>
    </main>

    <!-- Status bar -->
    <footer id="status-bar" class="status-bar hidden">
      <div class="status-left">
        <span class="status-item">
          <span class="autosave-indicator"></span>
          <span id="autosave-text">Saved</span>
        </span>
      </div>
      <div class="status-right">
        <span id="status-wordcount" class="status-item">0 words</span>
        <span id="status-charcount" class="status-item">0 chars</span>
      </div>
    </footer>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
